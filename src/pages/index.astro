---
import { getCollection } from "astro:content";
import Container from "@components/Container.astro";
import PageLayout from "@layouts/PageLayout.astro";
import Link from "@components/Link.astro";
import ContactForm from "@components/ContactForm.astro";
import SkillsSection from "@components/SkillsSection.astro";
import RecommendationsSection from "@components/RecommendationsSection.astro";
import GitHubActivity from "@components/GitHubActivity.astro";
import AvailabilityStatus from "@components/AvailabilityStatus.astro";
import SpotifyNowPlaying from "@components/SpotifyNowPlaying.astro";
import { SITE, HOME, SOCIALS } from "@consts";

const allwork = (await getCollection("work"))
  .sort((a, b) => new Date(b.data.dateStart).valueOf() - new Date(a.data.dateStart).valueOf())
  .slice(0,SITE.NUM_WORKS_ON_HOMEPAGE);

const work = await Promise.all(
  allwork.map(async (item) => {
    const { Content } = await item.render();
    return { ...item, Content };
  })
);

---

<PageLayout title={HOME.TITLE} description={HOME.DESCRIPTION}>
  <Container>
    <!-- Hero Section -->
    <section class="mb-8">
      <h1 class="animate text-2xl md:text-3xl font-semibold text-black dark:text-white mb-3">
        Hey, I'm Sattiyan <span class="text-3xl">üëãüèª</span>
      </h1>
      <p class="animate text-lg text-gray-600 dark:text-gray-300 font-medium mb-1">
        Senior PHP/Laravel Developer & Founder of Dotkod Solutions
      </p>
      <p class="animate text-sm text-gray-500 dark:text-gray-400 mb-1">
        Building scalable web applications, SaaS platforms, and e-commerce solutions
      </p>
      <p class="animate text-xs text-gray-400 dark:text-gray-500 italic mb-3">
        "Turning ideas into high-impact digital solutions that are practical, scalable, and future-ready."
      </p>
      
      <!-- Status Indicators -->
      <div class="animate mb-4 flex items-center gap-4">
        <AvailabilityStatus />
        <SpotifyNowPlaying />
      </div>
      
      <!-- Tech Stack Tags -->
      <div class="animate flex flex-wrap gap-2">
        <span class="px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-xs font-medium">
          Laravel
        </span>
        <span class="px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-xs font-medium">
          PHP
        </span>
        <span class="px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-xs font-medium">
          SaaS
        </span>
        <span class="px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-xs font-medium">
          E-commerce
        </span>
        <span class="px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 rounded-full text-xs font-medium">
          AI Integration
        </span>
      </div>
    </section>

    <div class="space-y-12">
      <section>
        <article class="space-y-4">
          <p class="animate">
            I'm a Senior PHP/Laravel Developer and Founder of Dotkod Solutions, with expertise in building scalable web applications, SaaS platforms, and e-commerce solutions. At TriSquare Technology, I work on end-to-end Laravel projects‚Äîfrom planning and database design to deployment‚Äîwhile integrating advanced features like AI chatbots, OpenAI APIs, automation with n8n, and multi-gateway payments.
          </p>
          <p class="animate">
            Through Dotkod Solutions, I help SMEs and startups elevate their digital presence with custom web, Shopify/WooCommerce, and SaaS products‚Äîall while leading the company's first AI-driven SaaS platform. I thrive on turning ideas into high-impact digital solutions that are practical, scalable, and future-ready.
          </p>
          <p class="animate">
            Outside of my professional endeavors, I'm also deeply passionate about films and TV series. 
            As a dedicated cinephile, I have a particular fondness for rom-coms and horror films. You can 
            often find me sharing my insights and reviews on platforms like 
            <Link href="https://threads.com/sattiyanss" aria-label="Threads" external>Threads</Link>, 
            <Link href="https://letterboxd.com/sattiyans" aria-label="Letterboxd" external>Letterboxd</Link>, 
            and <Link href="https://serializd.com/user/sattiyans" aria-label="Serializd" external>Serializd</Link>,
            where I enthusiastically engage with fellow movie enthusiasts and share my latest discoveries.
          </p>
        </article>
      </section>

      <!-- <section class="animate space-y-6">
        <div class="flex flex-wrap gap-y-2 items-center justify-between">
          <h5 class="font-semibold text-black dark:text-white">
            Latest posts
          </h5>
          <Link href="/blog">
            See all posts
          </Link>
        </div>
        <ul class="flex flex-col gap-4">
          {blog.map(post => (
            <li>
              <ArrowCard entry={post} />
            </li>
          ))}
        </ul>
      </section> -->

      <section class="animate space-y-6">
        <div class="flex flex-wrap gap-y-2 items-center justify-between">
          <h5 class="font-semibold text-black dark:text-white">
            Work Experience
          </h5>
          <Link href="/work">
            See all work
          </Link>
        </div>
        <ul class="flex flex-col space-y-4">
          {work.map(entry => (
            <li>
              <div class="text-sm opacity-75">
                {entry.data.dateStart} - {entry.data.dateEnd || 'Present'}
              </div>
              <div class="font-semibold text-black dark:text-white">
                {entry.data.company}
              </div>
              <div class="text-sm opacity-75">
                {entry.data.role}
              </div>
              <article>
                <entry.Content />
              </article>
            </li>
          ))}
        </ul>
      </section>

      <section class="animate space-y-6">
        <div class="flex flex-wrap gap-y-2 items-center justify-between">
          <h5 class="font-semibold text-black dark:text-white">
            Recent projects
          </h5>
          <Link href="https://github.com/sattiyans" external>
            See all projects on Github
          </Link>
        </div>
        <ul class="flex flex-col gap-4">
          <li> 
            <a target="_blank" href="https://d0t.my" class="relative group flex flex-nowrap py-3 px-4 pr-10 rounded-lg border border-black/15 dark:border-white/20 hover:bg-black/5 dark:hover:bg-white/5 hover:text-black dark:hover:text-white transition-colors duration-300 ease-in-out"> 
              <div class="flex flex-col flex-1 truncate"> 
                <div class="font-semibold"> 
                  d0t.my
                </div> 
                <div class="text-sm opacity-75"> 
                  AI-powered chatbot widget that integrates seamlessly into websites, providing intelligent engagement and support without complex setup.
                </div> 
              </div> 
              <svg class="absolute top-1/2 right-2 -translate-y-1/2 size-5 stroke-2 fill-none stroke-current mr-3" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
              </svg>
            </a> 
          </li>
          <li> 
            <a target="_blank" href="https://cinezd.dotkod.com" class="relative group flex flex-nowrap py-3 px-4 pr-10 rounded-lg border border-black/15 dark:border-white/20 hover:bg-black/5 dark:hover:bg-white/5 hover:text-black dark:hover:text-white transition-colors duration-300 ease-in-out"> 
              <div class="flex flex-col flex-1 truncate"> 
                <div class="font-semibold"> 
                  Cinezd
                </div> 
                <div class="text-sm opacity-75"> 
                  Social movie discovery app that enables users to discover, track, and share their cinematic journeys with watchlists and ratings.
                </div> 
              </div> 
              <svg class="absolute top-1/2 right-2 -translate-y-1/2 size-5 stroke-2 fill-none stroke-current mr-3" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
              </svg>
            </a> 
          </li>
        </ul>
      </section>

      <section class="animate space-y-6">
        <SkillsSection />
      </section>

      <section class="animate space-y-6">
        <RecommendationsSection />
      </section>

      <section class="animate space-y-6">
        <GitHubActivity />
      </section>

      <section class="animate space-y-6">
        <div class="flex flex-wrap gap-y-2 items-center justify-between">
          <h5 class="font-semibold text-black dark:text-white">
            Get in Touch
          </h5>
          <div class="flex flex-wrap gap-2 text-sm">
            {SOCIALS.map(SOCIAL => (
              <Link href={SOCIAL.HREF} external aria-label={`${SITE.NAME} on ${SOCIAL.NAME}`} class="text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors duration-200">
                {SOCIAL.NAME}
              </Link>
            ))}
            <span class="text-gray-400">/</span>
            <Link href={`mailto:${SITE.EMAIL}`} aria-label={`Email ${SITE.NAME}`} class="text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors duration-200">
              {SITE.EMAIL}
            </Link>
            <span class="text-gray-400">/</span>
            <Link href="https://sattiyans.com/cv" external aria-label="Download CV" class="text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors duration-200">
              CV
            </Link>
          </div>
        </div>
        <ContactForm />
      </section>
    </div>
  </Container>
</PageLayout>
